@page "/addfamily"
@using Data;
@using Models
@inject NavigationManager NavMng;
@inject IFamilyData FamilyData;

<h3>Add a New Family</h3>
<EditForm Model="@family" OnSubmit="@CreateNewFamily">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <p>Street Name:</p>
    <div class="form-group"> 
        <InputText @bind-Value="family.StreetName"/>
    </div>
    <p>House Number:</p>
    <div class="form-group">
        <InputNumber @bind-Value="family.HouseNumber"/>
    </div>
    <p class="actions">
        <button class="btn btn-outline-dark" type="submit">Add Family</button>
    </p>
</EditForm>

@code {
    private Family family = new Family();

    protected override async Task OnInitializedAsync() {
    }
    
    private void CreateNewFamily() {
        FamilyData.AddFamily(new Family() {
            Adults = new List<Adult>(),
            Children = new List<Child>(),
            HouseNumber = family.HouseNumber,
            StreetName = family.StreetName,
            Pets = new List<Pet>()
        });
        NavMng.NavigateTo("/addfamilymember");
    }
}